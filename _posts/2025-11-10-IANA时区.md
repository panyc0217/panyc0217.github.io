---
title: "IANA时区"
description: ""
categories: [ 计算机随笔 ]
tags: [ 计算机随笔 ]
published: true # 是否公开
comment: true # 评论区
math: true # 数学模式, 由MathJax支持
mermaid: true # Markdown的一种扩展, 用于画图
---

## IANA时区

> IANA（Internet Assigned Numbers Authority，互联网号码分配机构）负责协调全球DNS的根域名、IP地址分配和其他互联网协议资源。
>
> ——百度百科

### IANA时区命名：**Area/Location**

1. Area为地理大区，不绑定国家是因为存在国家边界、国家变更问题
2. Location为地理大区内的具体城市或地点

### IANA时区示例

> 夏令时（DST，Daylight Saving Time），在每年的某个时间点将时间往后拨快一小时（某些地区可能是半小时，视政策而定），又在当年的某个时间点将时间往前拨回
>
> <br>
> 以中国的夏令时制度（1986年至1991年）为例：
> 1. 四月中旬第一个星期日的凌晨2时整（北京时间），将时钟拨快一小时，即将表针由2时拨至3时，夏令时开始
> 2. 九月中旬第一个星期日的凌晨2时整（北京夏令时），再将时钟拨回一小时，即将表针由2时拨至1时，夏令时结束
>
> ——百度百科

| 时区               | UTC偏移量                 | 地理大区 | 城市/地点 |
|------------------|------------------------|------|-------|
| Asia/Shanghai    | UTC+8                  | 亚洲   | 上海    | 
| Asia/Tokyo       | UTC+9                  | 亚洲   | 日本    |
| America/New_York | UTC-5<br>UTC-4 (DST)   | 美洲   | 纽约    |
| Europe/London    | UTC+0<br>UTC+1 (DST)   | 欧洲   | 伦敦    |
| Europe/Paris     | UTC+1<br>UTC+2 (DST)   | 欧洲   | 巴黎    |
| Australia/Sydney | UTC+10<br>UTC+11 (DST) | 澳洲   | 悉尼    |

### IANA时区注意事项

1. 避免使用具有歧义的时区缩写，如CST、IST等

- CST可指代中国标准时间（China Standard Time）、北美中部时间（Central Standard Time）、古巴标准时间（Cuba Standard Time）
- IST可指代印度标准时间（India Standard Time）、爱尔兰标准时间（Irish Standard Time）、以色列标准时间（Israel Standard Time）

2. 时区规则（如夏令时起止时间、夏令时偏移时间等）可能因政策调整而变化，IANA时区数据库需要定期更新

## 操作系统内置时区数据库

| 操作系统    | 时区数据库位置                                                                        |
|---------|--------------------------------------------------------------------------------|
| Linux   | 文件系统：/usr/share/zoneinfo/                                                      |  
| Mac     | 文件系统：/usr/share/zoneinfo/                                                      | 
| Windows | 注册表：HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Time Zones |

## Golang的`time.LoadLocation`

编程语言并不一定使用操作系统内置的时区数据库，如[Golang标准库文档](https://golang.org/pkg/time/#LoadLocation)所说:
> The time zone database needed by LoadLocation may not be present on all systems, especially non-Unix systems.
> LoadLocation looks in the directory or uncompressed zip file named by the ZONEINFO environment variable, if any, then
> looks in known installation locations on Unix systems, and finally looks in $GOROOT/lib/time/zoneinfo.zip.
>
> LoadLocation所需的时区数据库可能并非存在于所有系统上，特别是非Unix系统。LoadLocation查找由ZONEINFO环境变量命名的目录或未压缩的zip文件（如果有的话），然后查找Unix系统上的已知安装位置，最后查找$GOROOT/lib/time/ZONEINFO.zip。

`time.LoadLocation`的IANA时区数据库查找优先级（见`time.LoadLocation`的函数描述）：

1. ZONEINFO环境变量
2. Unix系统上的已知安装位置（即/usr/share/zoneinfo/）
3. $GOROOT/lib/time/zoneinfo.zip
4. time/tzdata包（若通过import导入）
